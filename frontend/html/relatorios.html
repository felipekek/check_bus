<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Relatórios de Acesso</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/draw.css" />
    <link rel="stylesheet" href="../css/relatorios.css" />
    <link rel="stylesheet" href="../css/perfil.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
<div id="modalRelatorio" class="modal">
  <div class="modal-content">
    <span id="fecharModal" class="close">&times;</span>
    <h2>Relatório</h2>
    <p>Filtrar colunas:</p>

    <div class="filtros">
      <label><input type="checkbox" class="checkbox-coluna" data-chave="aluno" checked> Aluno</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="idCartao" checked> ID Cartão</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="curso" checked> Curso</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="instituicao" checked> Instituição</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="periodo" checked> Período</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="turno" checked> Turno</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="data" checked> Data</label>
      <label><input type="checkbox" class="checkbox-coluna" data-chave="horario" checked> Horário</label>
      <label><input type="checkbox" id="checkboxTodas" checked> Todas as opções</label>
    </div>

    <button id="confirmarDownload">Baixar</button>
  </div>
</div>

<button class="menu-btn" onclick="toggleMenu()">☰</button>
<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div id="sidebar-container"></div>

<button class="perfil-btn" onclick="location.href='perfil.html'">Perfil</button>

<div class="relatorio-container">
    <div class="titulo-container">
        <h1>Relatórios</h1>
        <input type="text" id="barraPesquisa" placeholder="Pesquisar...">
    </div>

    <p class="filtro-label">Filtrar por: </p>
    <div class="filtros-e-botao">
        <div class="filtros-container">
            <select id="filtro-instituicao"></select>
            <select id="filtro-turno"></select>
            <input type="date" id="filtro-data" />
        </div>

        <button class="btn-direita" id="botaoBaixarRelatorio">Baixar Relatório</button>
    </div>

    <div id="lista">
        <table id="tabela-relatorios">
            <thead>
                <tr>
                    <th>Aluno</th>
                    <th>ID Cartão</th>
                    <th>Curso</th>
                    <th>Instituição</th>
                    <th>Período</th>
                    <th>Turno</th>
                    <th>Data</th>
                    <th>Horário</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="9" class="no-data">Carregando registros...</td></tr>
            </tbody>
        </table>
    </div>
</div>

<button class="perfil-btn" id="btnPerfil">
  <i class="fa fa-user"></i> Perfil
</button>

  <script type="module">
    import { carregarModalPerfil, abrirPerfil } from "../js/perfil.js";

    carregarModalPerfil();

    const btnPerfil = document.getElementById("btnPerfil");
    btnPerfil.addEventListener("click", abrirPerfil);
  </script>

  <script type="module">
    import { inicializarSidebar } from "../js/sidebar-universal.js";
    await inicializarSidebar();
  </script>

<script type="module" src="../js/relatorios.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.7.0/jspdf.plugin.autotable.min.js"></script>
</body>
</html>
