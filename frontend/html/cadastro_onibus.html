<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de ﾃ馬ibus - CheckBus</title>

  <!-- CSS -->
  <link rel="stylesheet" href="../css/cadastro_onibus.css" />
  <link rel="stylesheet" href="../css/perfil.css" />
  <link rel="stylesheet" href="../css/draw.css" />
  <link rel="stylesheet" href="../css/admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <!-- ===== Bolas animadas no fundo ===== -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="shape shape-4"></div>
    <div class="shape shape-5"></div>
  </div>

  <!-- Botﾃ｣o do Menu -->
  <button class="menu-btn" onclick="toggleMenu()">笘ｰ</button>

  <!-- Botﾃ｣o de Perfil -->
  <button class="perfil-btn" id="btnPerfil">
    <i class="fa-solid fa-user-shield"></i> Perfil
  </button>

  <!-- Overlay -->
  <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

  <!-- Sidebar -->
  <div id="sidebar-container"></div>

  <!-- ===== HEADER (IGUAL AO HOME PRINCIPAL) ===== -->
  <div class="header-wrapper">
    <div class="logo-top">
      <i class="fas fa-bus"></i>
      <span>Check Bus</span>
    </div>
    <h1 class="header-title">Cadastro de ﾃ馬ibus</h1>
    <p class="header-subtitle">Gerencie a frota de ﾃｴnibus do sistema</p>
  </div>

  <!-- MODAL EDITAR -->
  <div id="modalEditarOnibus" class="modal-editar">
    <div class="modal-editar-content">
      <span id="fecharEditarOnibus" class="modal-close">&times;</span>
      <h2>Editar ﾃ馬ibus</h2>

      <form id="formEditarOnibus">
        <input type="hidden" id="editId">

        <label>Nﾃｺmero</label>
        <input type="text" id="editNumero" required>

        <label>Placa</label>
        <input type="text" id="editPlaca" required>

        <label>Modelo</label>
        <input type="text" id="editModelo" required>

        <label>Ano</label>
        <input type="number" id="editAno" required>

        <label>Capacidade</label>
        <input type="number" id="editCapacidade" required>

        <label>Tipo</label>
        <select id="editTipo">
          <option value="Convencional">Convencional</option>
          <option value="Executivo">Executivo</option>
          <option value="Micro-ﾃｴnibus">Micro-ﾃｴnibus</option>
        </select>

        <label>Status</label>
        <select id="editStatus">
          <option value="Ativo">Ativo</option>
          <option value="Em Manutenﾃｧﾃ｣o">Em Manutenﾃｧﾃ｣o</option>
          <option value="Inativo">Inativo</option>
        </select>

        <label>Observaﾃｧﾃｵes</label>
        <textarea id="editObservacoes"></textarea>

        <button type="submit" class="btn-submit">
          <i class="fas fa-save"></i>
          Salvar Alteraﾃｧﾃｵes
        </button>
      </form>
    </div>
  </div>

  <!-- CONTEﾃ咼O PRINCIPAL -->
  <main class="form-container">
    <div class="titulo-container">
      <h2>Novo ﾃ馬ibus</h2>
      <p class="subtitle">Preencha os dados abaixo para cadastrar um novo ﾃｴnibus</p>
    </div>

    <form id="formOnibus" class="grid-photo">

      <!-- CARD FOTO -->
      <section class="card photo-card">
        <h3>
          <i class="fa-solid fa-image"></i>
          Foto do ﾃ馬ibus
        </h3>

        <div class="photo-preview-box">
          <img id="previewFoto" src="../imagens/placeholder_bus.png" alt="Prﾃｩvia da Foto">
        </div>

        <label class="upload-btn">
          <i class="fa-solid fa-upload"></i>
          Selecionar Imagem
          <input type="file" id="fotoOnibus" accept="image/*">
        </label>

        <button type="button" id="btnRemoverFoto" class="remove-btn">
          <i class="fa-solid fa-trash"></i>
          Remover Imagem
        </button>
      </section>

      <!-- CARD DADOS -->
      <section class="card">
        <h3>
          <i class="fa-solid fa-info-circle"></i>
          Dados do ﾃ馬ibus
        </h3>

        <div class="grid-2">
          <div>
            <label for="numero">Nﾃｺmero do ﾃ馬ibus</label>
            <input type="text" id="numero" placeholder="Ex: 01" required />
          </div>

          <div>
            <label for="placa">Placa</label>
            <input type="text" id="placa" placeholder="ABC-1234" required />
          </div>

          <div>
            <label for="modelo">Modelo / Marca</label>
            <input type="text" id="modelo" placeholder="Ex: Marcopolo Torino" required />
          </div>

          <div>
            <label for="ano">Ano</label>
            <input type="number" id="ano" min="2000" max="2090" placeholder="Ex: 2020" required />
          </div>

          <div>
            <label for="capacidade">Capacidade (lugares)</label>
            <input type="number" id="capacidade" placeholder="Ex: 44" required />
          </div>

          <div>
            <label for="tipo">Tipo do ﾃ馬ibus</label>
            <select id="tipo" required>
              <option value="">Selecione</option>
              <option value="Convencional">Convencional</option>
              <option value="Executivo">Executivo</option>
              <option value="Micro-ﾃｴnibus">Micro-ﾃｴnibus</option>
            </select>
          </div>

          <div>
            <label for="status">Status</label>
            <select id="status" required>
              <option value="Ativo">Ativo</option>
              <option value="Em Manutenﾃｧﾃ｣o">Em Manutenﾃｧﾃ｣o</option>
              <option value="Inativo">Inativo</option>
            </select>
          </div>
        </div>
      </section>

      <!-- OBSERVAﾃﾃ髭S -->
      <section class="card full-row">
        <h3>
          <i class="fa-solid fa-notes-medical"></i>
          Observaﾃｧﾃｵes
        </h3>
        <textarea id="observacoes" placeholder="Opcional: Informaﾃｧﾃｵes adicionais sobre o ﾃｴnibus"></textarea>
      </section>

      <!-- BOTﾃグ -->
      <button type="submit" class="btn-submit full-row">
        <i class="fa-solid fa-check"></i>
        Cadastrar ﾃ馬ibus
      </button>

    </form>

    <!-- LISTA DE ﾃ年IBUS -->
    <section class="card lista-onibus-card">
      <h3>
        <i class="fa-solid fa-list"></i>
        ﾃ馬ibus Cadastrados
      </h3>

      <input 
        type="text" 
        id="buscarOnibus" 
        class="input-busca" 
        placeholder="剥 Buscar por nﾃｺmero, placa ou modelo..."
      />

      <div id="listaOnibus" class="lista-onibus">
        <p class="carregando">Carregando ﾃｴnibus...</p>
      </div>
    </section>

  </main>

  <!-- Scripts -->
  <script>
    window.toggleMenu = function() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const menuBtn = document.querySelector(".menu-btn");
      
      sidebar.classList.toggle("active");
      overlay.classList.toggle("active");
      if (menuBtn) menuBtn.classList.toggle("hidden");
    };
  </script>

  <script type="module">
    import { carregarModalPerfil, abrirPerfil } from "../js/perfil.js";
    carregarModalPerfil();
    const btnPerfil = document.getElementById("btnPerfil");
    if (btnPerfil) btnPerfil.addEventListener("click", abrirPerfil);
  </script>

  <script type="module">
    import { inicializarSidebar } from "../js/sidebar-universal.js";
    await inicializarSidebar();
  </script>

  <script type="module" src="../js/cadastro_onibus.js"></script>
</body>
</html>